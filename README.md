# CoLa 매달리기 루틴 웹앱

브라우저에서 세트 수와 세트당 시간을 설정하면 자동으로 타이머가 동작하고, 완료된 루틴 기록을 Supabase DB에 저장하는 간단한 루틴 관리 도구입니다. GitHub Pages 등 정적 호스팅 환경에 그대로 배포할 수 있습니다.


## 주요 기능
- 세트 수 / 세트당 시간을 입력하고 자동으로 순차 타이머 실행
- 일시 정지, 재개, 초기화 컨트롤 제공
- 각 세트 완료 시각을 화면에 로그로 표시
- 루틴이 끝나면 Supabase 테이블(`hang_session_logs`)에 자동 저장 (설정된 경우)
- Supabase 프로젝트 URL과 anon 키를 브라우저 `localStorage`에 저장/초기화할 수 있는 설정 UI 제공


## 사용 방법
1. **Supabase 설정 입력**
   - 페이지 상단의 Supabase 설정 영역에 프로젝트 URL과 anon 키를 입력 후 “설정 저장” 버튼을 누릅니다.
   - 브라우저 `localStorage`에 저장되므로 이후에는 자동으로 불러옵니다.
2. **루틴 값 설정**
   - 세트 수와 세트당 시간을 입력합니다. (기본값: 3세트, 30초)
3. **타이머 실행**
   - “시작” 버튼을 누르면 타이머가 동작합니다. 각 세트가 끝나면 로그가 추가됩니다.
   - 필요 시 “일시 정지”, “재개”, “초기화” 버튼으로 제어할 수 있습니다.
4. **로그 저장**
   - 모든 세트가 완료되면 Supabase에 로그를 저장합니다. 설정이 되어 있지 않으면 화면 메시지로 안내됩니다.


## Supabase 준비하기
1. **테이블 생성**
   ```sql
   create table hang_session_logs (
     id bigint generated by default as identity primary key,
     created_at timestamp with time zone default now(),
     set_count integer not null,
     set_duration_seconds integer not null,
     completed_sets jsonb not null,
     total_elapsed_seconds integer not null,
     finished_at timestamp with time zone not null
   );
   ```

2. **RLS 정책 구성**
   ```sql
   alter table hang_session_logs enable row level security;

   create policy "Allow anon inserts" on hang_session_logs
     for insert
     to anon
     with check (true);
   ```

3. **anon 키 주의 사항**
   - anon 키는 공개 가능한 키지만, 필요한 테이블에만 최소 권한 정책을 적용하세요.
   - admin/service role 키는 절대 클라이언트에 노출하지 않습니다.


## 로컬 개발 및 배포
- 모든 기능이 `index.html` 한 파일에 포함되어 있으므로 정적 웹 서버에서 그대로 동작합니다.
- 로컬에서 테스트하려면 브라우저로 `index.html`을 직접 열거나 `python -m http.server` 등 간단한 정적 서버를 사용하세요.
- GitHub Pages에 배포하면 어디서든 접근할 수 있습니다.


## 기술 스택
- Vanilla HTML/CSS/JavaScript
- [Supabase JavaScript Client v2](https://supabase.com/docs/reference/javascript/initializing)

필요한 추가 기능이나 UI 개선 사항이 있다면 이 README를 참고하여 확장해 주세요.
