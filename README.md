# CoLa 루틴 허브

CoLa 루틴 허브는 두 가지 자산으로 구성되어 있습니다.

- `index.html`: 홈 랜딩 페이지. 각 기능으로 이동하는 허브 역할을 합니다.
- `routine/`: 매달리기 루틴 타이머 웹앱(폴더). Supabase 연동으로 세션 로그를 기록합니다.
- `저속노화.md`: 49세 남성을 위한 뇌·심혈관 저속노화 식단 가이드 (Tailwind HTML).

GitHub Pages 같이 정적 호스팅 환경에 그대로 배포할 수 있으며, 로컬에서도 간단히 열 수 있습니다.


## 매달리기 루틴 타이머 주요 기능 (`routine/`)
- 세트 수 / 세트당 시간을 입력하고 자동으로 순차 타이머 실행
- 일시 정지, 재개, 초기화 컨트롤 제공
- 각 세트 완료 시각을 화면에 로그로 표시
- 루틴 종료 시 Supabase 테이블(`hang_session_logs`)에 자동 저장 (설정된 경우)
- Supabase 프로젝트 URL과 anon 키를 브라우저 `localStorage`에 저장/초기화할 수 있는 설정 UI 제공


## 타이머 사용 방법
1. **Supabase 설정 입력**
   - `routine/` 폴더의 `index.html`을 열고 상단 “Supabase 설정” 영역에 프로젝트 URL과 anon 키를 입력 후 “설정 저장”을 누릅니다.
   - 브라우저 `localStorage`에 저장되므로 이후에는 자동으로 불러옵니다.
2. **루틴 값 설정**
   - 세트 수와 세트당 시간을 입력합니다. (기본값: 3세트, 30초)
3. **타이머 실행**
   - “시작” 버튼을 누르면 타이머가 동작합니다. 각 세트가 끝나면 로그가 추가됩니다.
   - 필요 시 “일시 정지”, “재개”, “초기화” 버튼으로 제어할 수 있습니다.
4. **로그 저장**
   - 모든 세트가 완료되면 Supabase에 로그를 저장합니다. 설정이 되어 있지 않으면 안내 메시지가 표시됩니다.


## Supabase 준비하기
1. **테이블 생성**
   ```sql
   create table hang_session_logs (
     id bigint generated by default as identity primary key,
     created_at timestamp with time zone default now(),
     set_count integer not null,
     set_duration_seconds integer not null,
     completed_sets jsonb not null,
     total_elapsed_seconds integer not null,
     finished_at timestamp with time zone not null
   );
   ```

2. **RLS 정책 구성**
   ```sql
   alter table hang_session_logs enable row level security;

   create policy "Allow anon inserts" on hang_session_logs
     for insert
     to anon
     with check (true);
   ```

3. **anon 키 주의 사항**
   - anon 키는 공개 가능한 키지만, 필요한 테이블에만 최소 권한 정책을 적용하세요.
   - admin/service role 키는 절대 클라이언트에 노출하지 않습니다.


## 로컬 개발 및 배포
- 홈 허브는 `index.html`, 타이머는 `routine/index.html`, 식단 가이드는 `저속노화.md`를 브라우저로 직접 열면 확인할 수 있습니다.
- 정적 서버가 필요하다면 루트 디렉터리에서 `python -m http.server` 명령으로 모든 페이지를 미리보기 할 수 있습니다.
- GitHub Pages에 배포할 경우, 홈(`index.html`)으로 접속하면 각 기능으로 이동할 수 있습니다.


## 기술 스택
- Vanilla HTML/CSS/JavaScript
- [Supabase JavaScript Client v2](https://supabase.com/docs/reference/javascript/initializing)

필요한 추가 기능이나 UI 개선 사항이 있다면 이 README와 `AGENTS.md`를 참고하여 확장해 주세요.
